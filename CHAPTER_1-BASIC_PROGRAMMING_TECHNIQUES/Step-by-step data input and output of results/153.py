"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
6. Пошаговый ввод данных и вывод результатов *)

153. Даны натуральное число n, действительные числа x, an, an - 1, ..., a0. Вычислить, используя схему Горнера *), значение an * x ^ n + an - 1 * x ^ n - 1 + ... + a0.
*) an*x^n + a * n - 1 * x ^ n - 1 + ... + a0 = (...(an * x + an - 1) * x + an - 2) * x + ... + a1) * x + a0
"""


def main():
    print("Схема Горнера для вычисления значения многочлена")
    print("=" * 70)
    
    n = int(input("Введите степень многочлена n: "))
    x = float(input("Введите значение x: "))
    
    print(f"\nСхема Горнера для многочлена степени {n} при x = {x}:")
    print("=" * 70)
    
    # Ввод первого коэффициента (старшего)
    a_n = float(input(f"Введите коэффициент a_{n}: "))
    
    # Инициализация
    result = a_n
    print(f"\nШаг 0: результат = a_{n} = {result}")
    
    # Цикл по убыванию степеней
    for i in range(n, 0, -1):
        # Ввод коэффициента
        coeff = float(input(f"Введите коэффициент a_{i-1}: "))
        
        # Выполнение одного шага схемы Горнера
        prev_result = result
        result = result * x + coeff
        
        print(f"\nШаг {n-i+1}:")
        print(f"  Умножаем предыдущий результат на x: {prev_result} * {x} = {prev_result*x}")
        print(f"  Прибавляем коэффициент a_{i-1} = {coeff}")
        print(f"  Новый результат = {prev_result*x} + {coeff} = {result}")
    
    print(f"\n" + "=" * 70)
    print(f"Итоговое значение многочлена: {result}")
    
    # Демонстрация формулы
    print("\nСхема Горнера в виде формулы:")
    print(f"P(x) = ((...((a_{n}·x + a_{n-1})·x + a_{n-2})·x + ... + a_1)·x + a_0")
    print(f"     = {result}")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
