"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
6. Пошаговый ввод данных и вывод результатов *)

140. Вычислить значение выражения (3 * a + 4) / (a * a - 5 * a - 9) для a = 1,2, ..., 100.
"""


def main():
    print("Вычисление выражения (3a + 4)/(a^2 - 5a - 9) для a = 1..100")
    print("=" * 80)
    
    print("\nАнализ знаменателя a^2 - 5a - 9:")
    print("Корни уравнения a^2 - 5a - 9 = 0:")
    print("D = (-5)^2 - 4*1*(-9) = 25 + 36 = 61")
    print("a1 = (5 - √61)/2 ≈ (5 - 7.81)/2 ≈ -1.405")
    print("a2 = (5 + √61)/2 ≈ (5 + 7.81)/2 ≈ 6.405")
    print("Так как a - целые числа от 1 до 100, знаменатель нигде не обращается в 0.")
    print("=" * 80)
    
    print("\nТаблица значений (первые 20 и последние 5 значений):")
    print("-" * 60)
    print("   a |     Значение     |   a |     Значение     ")
    print("-" * 60)
    
    # Первые 20 значений
    for a in range(1, 21):
        numerator = 3 * a + 4
        denominator = a * a - 5 * a - 9
        value = numerator / denominator
        if a <= 10:
            print(f"{a:4} | {value:16.6f} | {a+10:4} | {(3*(a+10)+4)/((a+10)*(a+10)-5*(a+10)-9):16.6f}")
    
    print("\n...")
    
    # Последние 5 значений
    for a in range(96, 101):
        numerator = 3 * a + 4
        denominator = a * a - 5 * a - 9
        value = numerator / denominator
        print(f"{a:4} | {value:16.6f}")
    
    # Анализ поведения функции
    print("\n" + "=" * 80)
    print("Анализ поведения функции:")
    
    # Находим особые точки
    # Производная числителя: 3
    # Производная знаменателя: 2a - 5
    # Производная дроби: (3*(a^2-5a-9) - (3a+4)*(2a-5)) / (a^2-5a-9)^2
    
    # Критические точки: когда производная числителя*знаменатель = числитель*производная знаменателя
    # 3*(a^2-5a-9) = (3a+4)*(2a-5)
    # 3a^2 - 15a - 27 = 6a^2 - 15a + 8a - 20
    # 3a^2 - 15a - 27 = 6a^2 - 7a - 20
    # 0 = 3a^2 + 8a + 7
    
    print("Критические точки (где производная равна 0):")
    print("Решаем 3a^2 + 8a + 7 = 0")
    print("D = 64 - 84 = -20 < 0 - нет действительных корней")
    print("Функция монотонна на всем диапазоне.")
    
    # Проверяем значения на границах
    a1 = 1
    value1 = (3*a1 + 4) / (a1*a1 - 5*a1 - 9)
    a100 = 100
    value100 = (3*a100 + 4) / (a100*a100 - 5*a100 - 9)
    
    print(f"\nЗначение при a = 1: {value1:.6f}")
    print(f"Значение при a = 100: {value100:.6f}")
    
    # Проверяем знак выражения
    print("\nЗнак выражения:")
    print("Числитель 3a+4 > 0 при a > -4/3, т.е. для всех a >= 1")
    print("Знаменатель a^2-5a-9:")
    print("  При a = 1: 1-5-9 = -13 < 0")
    print("  При a = 2: 4-10-9 = -15 < 0")
    print("  При a = 6: 36-30-9 = -3 < 0")
    print("  При a = 7: 49-35-9 = 5 > 0")
    print("Знаменатель меняет знак между a=6 и a=7.")
    print("Следовательно, выражение меняет знак между a=6 и a=7.")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
