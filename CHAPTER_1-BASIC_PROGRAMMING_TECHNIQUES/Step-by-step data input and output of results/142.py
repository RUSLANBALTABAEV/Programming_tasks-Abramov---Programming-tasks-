"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
6. Пошаговый ввод данных и вывод результатов *)

142. Вычислить значения многочлена x^5 - 9 * x^4 + 1.7 * x * x - 9.6 для x = 0,1, ..., 5.
"""


def main():
    print("Вычисление значений многочлена x^5 - 9x^4 + 1.7x^2 - 9.6")
    print("=" * 60)
    print("Используем схему Горнера (после приведения к виду):")
    print("P(x) = x^5 - 9x^4 + 1.7x^2 - 9.6")
    print("     = x^2(x^3 - 9x^2 + 1.7) - 9.6")
    print("     = x^2(x^2(x - 9) + 1.7) - 9.6")
    print("=" * 60)
    
    print("\nТаблица значений:")
    print("-" * 60)
    print(f"{'x':^6} {'P(x)':^15} {'Вычисления по схеме Горнера':^30}")
    print("-" * 60)
    
    for x in range(0, 6):
        # Вычисляем по схеме Горнера:
        # P(x) = x^5 - 9x^4 + 1.7x^2 - 9.6
        # Представим как: ((((x - 9)x + 0)x + 1.7)x + 0)x - 9.6
        # Но это не совсем стандартная схема Горнера из-за пропущенных степеней
        
        # Вместо этого используем прямое вычисление
        result = x**5 - 9*(x**4) + 1.7*(x**2) - 9.6
        
        # Альтернативно, можно вычислить как:
        # term = x**2 * (x**3 - 9*x**2 + 1.7) - 9.6
        print(f"{x:^6} {result:^15.6f} x^5-9x^4+1.7x^2-9.6")
    
    print("-" * 60)
    
    # Анализ корней уравнения P(x) = 0
    print("\nРешение уравнения P(x) = 0:")
    print("Методом проб находим интервалы, где функция меняет знак:")
    
    # Вычисляем значения и проверяем знаки
    prev_value = None
    prev_x = None
    
    for x in range(0, 6):
        result = x**5 - 9*(x**4) + 1.7*(x**2) - 9.6
        
        if prev_value is not None:
            if prev_value == 0:
                print(f"  Найден точный корень при x = {prev_x}")
            elif result == 0:
                print(f"  Найден точный корень при x = {x}")
            elif prev_value * result < 0:
                print(f"  Между x = {prev_x} и x = {x} есть корень")
                # Приближенно находим корень линейной интерполяцией
                if prev_x is not None:
                    root_approx = prev_x - prev_value * (x - prev_x) / (result - prev_value)
                    print(f"    Приближенный корень: x ≈ {root_approx:.4f}")
        
        prev_value = result
        prev_x = x
    
    # Проверяем точки за пределами диапазона
    print("\nПоведение функции за пределами [0, 5]:")
    for x in [-1, 6]:
        result = x**5 - 9*(x**4) + 1.7*(x**2) - 9.6
        print(f"  P({x}) = {result:.4f}")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
