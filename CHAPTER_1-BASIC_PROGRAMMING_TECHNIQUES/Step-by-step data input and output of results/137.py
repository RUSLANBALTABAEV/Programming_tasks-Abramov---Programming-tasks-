"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
6. Пошаговый ввод данных и вывод результатов *)

*) В задачах этого параграфа не требуется хранения исходных
последовательностей значений.
137. Даны натуральное число n, действительные числа a1, ..., an.
Вычислить:
"""


import math

def main():
    print("Программа вычисления последовательностей для заданных действительных чисел")
    
    # Ввод количества чисел
    n = int(input("Введите натуральное число n: "))
    
    # Переменные для накопления промежуточных результатов
    current_sum = 0          # Текущая сумма для пунктов а) и в)
    current_product = 1      # Текущее произведение для пункта г)
    
    # Для факториалов в пункте е)
    factorial = 1
    
    print("\nВычисление последовательностей:")
    print("i\tа) Накоп. сумма\tб) a1*ai\tв) |накоп. сумма|\tг) Знакоперем. произв.\tд) Знакочередование\tе) ai + i!")
    print("-" * 120)
    
    # Переменная для хранения a1 (нужна для пунктов б) и г))
    a1 = 0
    
    for i in range(1, n + 1):
        # Ввод текущего числа
        a = float(input(f"Введите a{i}: "))
        
        # Запоминаем a1 при первом вводе
        if i == 1:
            a1 = a
        
        # Вычисление текущих значений для всех пунктов
        
        # а) Накопленная сумма: a1, a1+a2, ..., a1+...+an
        current_sum += a
        
        # б) a1^2, a1*a2, a1*a3, ..., a1*an
        if i == 1:
            b_value = a1 * a1  # a1^2
        else:
            b_value = a1 * a
        
        # в) |a1|, |a1+a2|, ..., |a1+...+an|
        c_value = abs(current_sum)
        
        # г) Знакопеременное произведение
        current_product *= a
        d_value = ((-1) ** (i + 1)) * current_product
        
        # д) -a1, a2, -a3, ..., (-1)^n * an
        e_value = ((-1) ** i) * a
        
        # е) a1 + 1!, a2 + 2!, ..., an + n!
        factorial *= i  # Вычисляем i!
        f_value = a + factorial
        
        # Вывод текущей строки результатов
        print(f"{i}\t{current_sum:10.4f}\t{b_value:10.4f}\t{c_value:14.4f}\t{d_value:20.4f}\t{e_value:16.4f}\t{f_value:10.4f}")
    
    # После завершения цикла выводим итоговые последовательности в виде отдельных списков
    print("\n\nИТОГОВЫЕ ПОСЛЕДОВАТЕЛЬНОСТИ:")
    print("=" * 70)
    
    # Для вывода итоговых последовательностей нужно повторить вычисления,
    # так как мы не сохраняли все промежуточные значения
    
    # Сброс переменных для повторного вычисления
    print("\nа) Накопленные суммы: ", end="")
    current_sum = 0
    for i in range(1, n + 1):
        # В реальной программе здесь нужно было бы снова запрашивать числа
        # Для демонстрации выведем только формулу
        if i == 1:
            print("a1", end="")
        else:
            print(f" + a{i}", end="")
        if i < n:
            print(", ", end="")
    
    print("\nб) Произведения с a1: ", end="")
    for i in range(1, n + 1):
        if i == 1:
            print("a1^2", end="")
        else:
            print(f"a1*a{i}", end="")
        if i < n:
            print(", ", end="")
    
    print("\nв) Модули накопленных сумм: ", end="")
    for i in range(1, n + 1):
        if i == 1:
            print("|a1|", end="")
        else:
            print(f"|a1+...+a{i}|", end="")
        if i < n:
            print(", ", end="")
    
    print("\nг) Знакопеременные произведения: ", end="")
    for i in range(1, n + 1):
        if i == 1:
            print("a1", end="")
        elif i == 2:
            print("a1 - a1*a2", end="")
        else:
            sign = "+" if i % 2 == 1 else "-"
            print(f" {sign} a1*...*a{i}", end="")
        if i < n:
            print(", ", end="")
    
    print("\nд) Знакочередование: ", end="")
    for i in range(1, n + 1):
        sign = "-" if i % 2 == 1 else "+"
        print(f"{sign}a{i}", end="")
        if i < n:
            print(", ", end="")
    
    print("\nе) ai + i!: ", end="")
    for i in range(1, n + 1):
        print(f"a{i}+{i}!", end="")
        if i < n:
            print(", ", end="")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
