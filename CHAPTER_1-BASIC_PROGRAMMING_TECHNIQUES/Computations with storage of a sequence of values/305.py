"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
9. Вычисления с хранением последовательности значений

305. Даны действительные числа a1,…, a30. Оставить без изменения последовательность a1, …, a30, если она упорядочена по неубыванию или по по невозрастанию; в противном случае удалить из последовательности те члены, порядковые номера которых кратны четырем, сохранив прежним порядок оставленных членов.
"""


import random

def is_sorted(arr):
    """Проверяет, упорядочена ли последовательность по неубыванию или по невозрастанию."""
    non_decr = all(arr[i] <= arr[i+1] for i in range(len(arr)-1))
    non_incr = all(arr[i] >= arr[i+1] for i in range(len(arr)-1))
    return non_decr or non_incr

def main():
    print("Программа для обработки последовательности из 30 действительных чисел.")
    print("Если последовательность упорядочена по неубыванию или невозрастанию, она остаётся без изменений.")
    print("Иначе удаляются элементы с номерами, кратными 4 (4,8,...,28).")
    
    # Выбор способа ввода
    print("\nВыберите способ задания последовательности:")
    print("1. Ввести числа вручную")
    print("2. Сгенерировать случайные числа")
    print("3. Использовать готовые наборы")
    
    while True:
        try:
            choice = int(input("\nВаш выбор (1-3): "))
            if 1 <= choice <= 3:
                break
            else:
                print("Ошибка: введите 1, 2 или 3.")
        except ValueError:
            print("Ошибка: введите целое число.")
    
    n = 30
    a = []
    
    if choice == 1:
        # Ручной ввод
        print(f"\nВведите {n} действительных чисел:")
        for i in range(n):
            while True:
                try:
                    val = float(input(f"a_{i+1}: "))
                    a.append(val)
                    break
                except ValueError:
                    print("Ошибка: введите действительное число.")
    
    elif choice == 2:
        # Случайные числа от -10 до 10
        random.seed()
        a = [random.uniform(-10, 10) for _ in range(n)]
        print("\nСгенерированы случайные числа:")
        for i, val in enumerate(a, 1):
            print(f"a_{i:2} = {val:8.4f}")
    
    else:
        # Готовые наборы
        examples = [
            # Упорядоченная по неубыванию
            [i/2 for i in range(1, 31)],
            # Упорядоченная по невозрастанию
            [i/2 for i in range(30, 0, -1)],
            # Неупорядоченная
            [random.uniform(-5,5) for _ in range(30)],
            # Частично упорядоченная
            [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
            [30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1],
            [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,0]  # неупорядоченная
        ]
        print("\nВыберите готовый набор:")
        for idx, ex in enumerate(examples, 1):
            desc = "упорядоченная по неубыванию" if idx==1 else \
                   "упорядодоченная по невозрастанию" if idx==2 else \
                   "случайная" if idx==3 else \
                   "возрастающая" if idx==4 else \
                   "убывающая" if idx==5 else \
                   "почти возрастающая с нарушением"
            print(f"{idx}. {desc} (первые несколько: {ex[:5]}...)")
        while True:
            try:
                ex_choice = int(input("Ваш выбор (1-6): "))
                if 1 <= ex_choice <= 6:
                    a = examples[ex_choice-1]
                    break
                else:
                    print("Ошибка: введите число от 1 до 6.")
            except ValueError:
                print("Ошибка: введите целое число.")
    
    # Исходная последовательность
    print("\nИсходная последовательность:")
    for i in range(0, n, 5):
        print(" ".join(f"{a[j]:8.4f}" for j in range(i, min(i+5, n))))
    
    # Проверка упорядоченности
    ordered = is_sorted(a)
    if ordered:
        print("\nПоследовательность упорядочена (по неубыванию или невозрастанию).")
        print("Оставляем без изменения.")
        result = a
    else:
        print("\nПоследовательность не упорядочена.")
        print("Удаляем элементы с номерами, кратными 4 (4,8,12,...,28).")
        # Формируем новую последовательность
        result = [val for idx, val in enumerate(a, start=1) if idx % 4 != 0]
        print(f"Новая длина: {len(result)}")
    
    # Вывод результата
    print("\nРезультирующая последовательность:")
    if not result:
        print("Последовательность пуста.")
    else:
        for i in range(0, len(result), 5):
            print(" ".join(f"{result[j]:8.4f}" for j in range(i, min(i+5, len(result)))))
    
    # Дополнительная информация
    print("\n" + "="*50)
    print("Статистика:")
    print(f"Исходная длина: {len(a)}")
    print(f"Результирующая длина: {len(result)}")
    if not ordered:
        removed = len(a) - len(result)
        print(f"Удалено элементов: {removed}")

if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
