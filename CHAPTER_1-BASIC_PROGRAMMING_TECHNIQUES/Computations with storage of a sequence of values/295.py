"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
9. Вычисления с хранением последовательности значений

295. Даны целые числа a1 ,…, a20. Наименьший член последовательности a1 ,…, a20 заменить целой частью среднего арифметического всех членов, остальные члены оставить без
изменения. Если в последовательности несколько членов со значением min (a1,…, a20), то заменить последний по порядку.
"""


import random

def main():
    print("Программа заменяет наименьший член последовательности целой частью среднего арифметического.")
    print("Если минимальных несколько - заменяется последний по порядку.")
    
    # Выбор способа ввода данных
    print("\nВыберите способ задания последовательности:")
    print("1. Ввести числа вручную")
    print("2. Использовать случайные числа от -100 до 100")
    print("3. Использовать готовый набор 1: все разные числа")
    print("4. Использовать готовый набор 2: несколько минимальных")
    print("5. Использовать готовый набор 3: все одинаковые числа")
    
    while True:
        try:
            choice = int(input("\nВаш выбор (1-5): "))
            if 1 <= choice <= 5:
                break
            else:
                print("Ошибка: выберите число от 1 до 5.")
        except ValueError:
            print("Ошибка: введите целое число от 1 до 5.")
    
    n = 20  # количество элементов по условию
    
    # Инициализация последовательности в зависимости от выбора
    if choice == 1:
        # Ручной ввод
        print(f"\nВведите {n} целых чисел:")
        a = []
        for i in range(n):
            while True:
                try:
                    value = int(input(f"a_{i+1}: "))
                    a.append(value)
                    break
                except ValueError:
                    print("Ошибка: введите целое число.")
    
    elif choice == 2:
        # Случайные числа от -100 до 100
        random.seed()
        a = [random.randint(-100, 100) for _ in range(n)]
        print(f"\nИспользуется набор из {n} случайных чисел от -100 до 100")
    
    elif choice == 3:
        # Готовый набор 1: все разные числа
        a = [5, 12, 8, 23, 1, 45, 19, 33, 7, 14, 2, 28, 16, 39, 11, 22, 4, 31, 9, 18]
        print("\nИспользуется готовый набор 1: все разные числа")
    
    elif choice == 4:
        # Готовый набор 2: несколько минимальных
        a = [10, 5, 8, 5, 15, 5, 20, 25, 5, 30, 35, 40, 5, 45, 50, 55, 5, 60, 65, 5]
        print("\nИспользуется готовый набор 2: несколько минимальных (5)")
    
    elif choice == 5:
        # Готовый набор 3: все одинаковые числа
        a = [7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7]
        print("\nИспользуется готовый набор 3: все одинаковые числа (7)")
    
    # Вывод исходной последовательности
    print("\nИсходная последовательность a:")
    for i in range(n):
        print(f"a_{i+1:2} = {a[i]:4}")
    
    # Находим минимальное значение
    min_val = min(a)
    print(f"\nМинимальное значение в последовательности: {min_val}")
    
    # Находим последнее вхождение минимального значения
    # Ищем с конца, чтобы найти последний индекс
    last_min_index = -1
    for i in range(n-1, -1, -1):  # от n-1 до 0
        if a[i] == min_val:
            last_min_index = i
            break
    
    print(f"Последний минимальный элемент находится на позиции {last_min_index + 1}")
    
    # Вычисляем среднее арифметическое всех членов
    average = sum(a) / n
    print(f"\nСреднее арифметическое всех {n} членов: {average:.6f}")
    
    # Берем целую часть (используем int() - это floor для положительных и отрицательных)
    int_part = int(average)
    print(f"Целая часть среднего арифметического: {int_part}")
    
    # Заменяем последний минимальный элемент целой частью среднего
    old_value = a[last_min_index]
    a[last_min_index] = int_part
    
    # Вывод результата
    print("\nПоследовательность после замены:")
    print("Индекс | Старое значение | Новое значение")
    print("-" * 40)
    
    # Выводим только измененный элемент и несколько соседних
    start = max(0, last_min_index - 2)
    end = min(n, last_min_index + 3)
    
    for i in range(start, end):
        if i == last_min_index:
            print(f"a_{i+1:2}   | {old_value:14} | {a[i]:14}  <-- заменен")
        else:
            print(f"a_{i+1:2}   | {a[i]:14} | {a[i]:14}")
    
    print("\nПолная последовательность после замены:")
    for i in range(n):
        if i % 5 == 0 and i != 0:
            print()
        marker = "*" if i == last_min_index else " "
        print(f"a_{i+1:2} = {a[i]:4}{marker}", end=" | ")
    
    # Дополнительная информация
    print("\n\n" + "="*50)
    print("Дополнительная информация:")
    print(f"Минимальное значение: {min_val}")
    print(f"Количество минимальных элементов: {sum(1 for x in a if x == min_val)}")
    print(f"Сумма всех элементов: {sum(a)}")
    print(f"Среднее арифметическое: {average:.6f}")
    print(f"Целая часть среднего: {int_part}")
    print(f"Максимальный элемент: {max(a)}")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
