"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
9. Вычисления с хранением последовательности значений

281. Даны действительные числа a1, …, a28, b1, …, b28. Члены последовательности c1, …, c29 связаны с членами данных последовательностей соотношениями c29 = 0, c29-i = (a29-i) / (b29 - i - c29 - i + 1 ) * (i = 1, …, 28). Получить c1, …, c29.
"""


def main():
    n = 28  # количество элементов в последовательностях a и b
    c_length = 29  # количество элементов в последовательности c

    # Ввод последовательности a
    print(f"Введите {n} действительных чисел для последовательности a:")
    a = []
    for i in range(n):
        while True:
            try:
                value = float(input(f"a_{i+1}: "))
                a.append(value)
                break
            except ValueError:
                print("Ошибка: введите действительное число.")

    # Ввод последовательности b
    print(f"\nВведите {n} действительных чисел для последовательности b:")
    b = []
    for i in range(n):
        while True:
            try:
                value = float(input(f"b_{i+1}: "))
                b.append(value)
                break
            except ValueError:
                print("Ошибка: введите действительное число.")

    # Инициализация массива c
    c = [0] * c_length
    
    # Установка начального значения: c_29 = 0
    c[28] = 0.0  # c[28] соответствует c_29

    # Вычисление c в обратном порядке
    # c_{29-i} = a_{29-i} / (b_{29-i} - c_{29-i+1}) для i=1,...,28
    # Это эквивалентно: c_k = a_k / (b_k - c_{k+1}) для k=28,27,...,1
    for k in range(28, 0, -1):  # k от 28 до 1 включительно
        # Индексы в Python начинаются с 0, поэтому:
        # a[k-1] соответствует a_k (k от 1 до 28)
        # b[k-1] соответствует b_k
        # c[k] соответствует c_{k+1}
        denominator = b[k-1] - c[k]
        
        # Проверка деления на ноль
        if abs(denominator) < 1e-12:
            print(f"Внимание: знаменатель близок к нулю при вычислении c_{k}")
            print(f"b_{k} = {b[k-1]}, c_{k+1} = {c[k]}")
            denominator = 1e-12  # Малое значение для избежания деления на ноль
        
        c[k-1] = a[k-1] / denominator

    # Вывод результатов
    print("\nРезультаты вычисления последовательности c:")
    print("i\tc_i")
    print("-" * 30)
    for i in range(c_length):
        print(f"{i+1}\t{c[i]:.10f}")

    # Дополнительная проверка
    print("\nПроверка (первые 5 и последние 5 значений):")
    print("i\ta_i\t\tb_i\t\tc_i")
    print("-" * 60)
    for i in range(5):
        print(f"{i+1}\t{a[i]:.6f}\t{b[i]:.6f}\t{c[i]:.6f}")
    
    print("...")
    for i in range(24, 28):
        print(f"{i+1}\t{a[i]:.6f}\t{b[i]:.6f}\t{c[i]:.6f}")
    print(f"29\t-\t\t-\t\t{c[28]:.6f}")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
