"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
9. Вычисления с хранением последовательности значений

294. Даны действительные числа r1,…, r17, среди которых заведомо есть как отрицательные, так и неотрицательные. Получить x1*y1+ ... + xs*ys, где x1, ..., xp - отрицательные члены последовательности r1,...,r17, взятые в порядке их следования, y1,.., yq - неотрицательные члены, взятые в обратном порядке, s = min (p, q).
"""


import random

def main():
    print("Программа для вычисления суммы произведений отрицательных и неотрицательных чисел.")
    print("Условие: даны действительные числа r1,...,r17, среди которых есть как отрицательные,")
    print("так и неотрицательные. Получить сумму x1*y1 + ... + xs*ys, где x1,...,xp — отрицательные")
    print("в порядке следования, y1,...,yq — неотрицательные в обратном порядке, s = min(p,q).")
    
    # Выбор способа ввода данных
    print("\nВыберите способ задания последовательности:")
    print("1. Ввести числа вручную")
    print("2. Использовать случайные числа от -10 до 10")
    print("3. Использовать готовый набор 1: чередование отрицательных и неотрицательных")
    print("4. Использовать готовый набор 2: больше отрицательных")
    print("5. Использовать готовый набор 3: больше неотрицательных")
    
    while True:
        try:
            choice = int(input("\nВаш выбор (1-5): "))
            if 1 <= choice <= 5:
                break
            else:
                print("Ошибка: выберите число от 1 до 5.")
        except ValueError:
            print("Ошибка: введите целое число от 1 до 5.")
    
    n = 17  # количество элементов по условию
    
    # Инициализация последовательности в зависимости от выбора
    if choice == 1:
        # Ручной ввод
        print(f"\nВведите {n} действительных чисел:")
        r = []
        for i in range(n):
            while True:
                try:
                    value = float(input(f"r_{i+1}: "))
                    r.append(value)
                    break
                except ValueError:
                    print("Ошибка: введите действительное число.")
    elif choice == 2:
        # Случайные числа от -10 до 10
        random.seed()
        r = [random.uniform(-10, 10) for _ in range(n)]
        print(f"\nИспользуется набор из {n} случайных чисел от -10 до 10")
    elif choice == 3:
        # Готовый набор 1: чередование
        r = [ -1.5, 2.0, -3.2, 4.1, -0.5, 0, -2.8, 3.3, -4.0, 5.5,
              -1.1, 6.0, -7.2, 8.4, -9.1, 10.2, -0.3 ]
        print("\nИспользуется готовый набор 1: чередование отрицательных и неотрицательных")
    elif choice == 4:
        # Готовый набор 2: больше отрицательных
        r = [ -5.1, -4.2, -3.3, -2.4, -1.5, 0.0, 1.1, -6.6, -7.7, -8.8,
              2.2, 3.3, -9.9, -10.1, -11.2, 4.4, 5.5 ]
        print("\nИспользуется готовый набор 2: больше отрицательных")
    elif choice == 5:
        # Готовый набор 3: больше неотрицательных
        r = [ 1.1, 2.2, 3.3, -0.5, -1.5, 4.4, 5.5, -2.5, 6.6, 7.7,
              8.8, -3.5, 9.9, 10.1, 11.2, -4.5, 12.3 ]
        print("\nИспользуется готовый набор 3: больше неотрицательных")
    
    # Вывод исходной последовательности
    print("\nИсходная последовательность r:")
    for i in range(n):
        sign = "отрицательное" if r[i] < 0 else "неотрицательное"
        print(f"r_{i+1:2} = {r[i]:7.3f} ({sign})")
    
    # Разделение на отрицательные и неотрицательные с сохранением порядка
    x = []  # отрицательные в порядке следования
    y = []  # неотрицательные в порядке следования
    
    for value in r:
        if value < 0:
            x.append(value)
        else:  # >= 0
            y.append(value)
    
    # Проверка наличия обоих типов чисел
    if len(x) == 0:
        print("\nОшибка: в последовательности нет отрицательных чисел!")
        return
    if len(y) == 0:
        print("\nОшибка: в последовательности нет неотрицательных чисел!")
        return
    
    # Y берем в обратном порядке
    y_reversed = list(reversed(y))
    
    # Определяем s = min(p, q)
    s = min(len(x), len(y))
    
    # Вывод промежуточных данных
    print(f"\nОтрицательные числа (x), p = {len(x)}:")
    for i, val in enumerate(x, 1):
        print(f"  x_{i} = {val:.3f}")
    
    print(f"\nНеотрицательные числа (y исходные), q = {len(y)}:")
    for i, val in enumerate(y, 1):
        print(f"  y_{i} = {val:.3f}")
    
    print(f"\nНеотрицательные числа в обратном порядке (y_reversed):")
    for i, val in enumerate(y_reversed, 1):
        print(f"  y_{i} = {val:.3f}")
    
    print(f"\nКоличество пар для произведения s = min({len(x)}, {len(y)}) = {s}")
    
    # Вычисляем сумму произведений
    total_sum = 0.0
    print("\nВычисляем сумму произведений:")
    for i in range(s):
        product = x[i] * y_reversed[i]
        total_sum += product
        print(f"  x_{i+1} * y_{i+1} = {x[i]:.3f} * {y_reversed[i]:.3f} = {product:.3f}")
    
    print(f"\nИтоговая сумма: {total_sum:.6f}")
    
    # Дополнительная информация
    print("\n" + "="*50)
    print("Дополнительная информация:")
    print(f"Количество отрицательных чисел (p): {len(x)}")
    print(f"Количество неотрицательных чисел (q): {len(y)}")
    print(f"Сумма всех отрицательных чисел: {sum(x):.3f}")
    print(f"Сумма всех неотрицательных чисел: {sum(y):.3f}")
    print(f"Среднее значение отрицательных: {sum(x)/len(x):.3f}" if len(x) > 0 else "Нет отрицательных")
    print(f"Среднее значение неотрицательных: {sum(y)/len(y):.3f}" if len(y) > 0 else "Нет неотрицательных")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
