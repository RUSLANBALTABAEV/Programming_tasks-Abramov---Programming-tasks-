"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

210. Даны натуральное число n, действительные числа a₁, ..., aₙ.
Получить все натуральные j (2 ≤ j ≤ n-1), для которых aⱼ < aⱼ₊₁.
"""

def find_increasing_indices(n, a):
    """
    Находит все натуральные j (2 ≤ j ≤ n-1), для которых aⱼ < aⱼ₊₁.
    n: натуральное число (длина последовательности)
    a: список действительных чисел [a₁, a₂, ..., aₙ]
    Возвращает список индексов j, удовлетворяющих условию.
    """
    if n < 3:
        return []  # Нет j в диапазоне 2 ≤ j ≤ n-1, если n < 3
    
    result = []
    for j in range(1, n-1):  # j от 1 до n-2 в 0-индексации (соответствует 2..n-1 в 1-индексации)
        if a[j] < a[j+1]:
            result.append(j+1)  # +1 для перевода к 1-индексации
    
    return result


def find_increasing_indices_detailed(n, a):
    """
    Подробная версия с пошаговым выводом.
    Возвращает список индексов и детальное описание.
    """
    if n < 3:
        steps = [f"1. n = {n} < 3, поэтому нет индексов j в диапазоне 2 ≤ j ≤ n-1."]
        return [], "\n".join(steps)
    
    steps = []
    steps.append(f"1. Исходная последовательность: a = {a}")
    steps.append(f"2. Длина последовательности: n = {n}")
    steps.append(f"3. Проверяем индексы j в диапазоне 2 ≤ j ≤ {n-1}:")
    
    result = []
    for j in range(1, n-1):  # j в 0-индексации
        a_j = a[j]
        a_j1 = a[j+1]
        condition = a_j < a_j1
        j_1indexed = j+1  # Переводим к 1-индексации
        
        steps.append(f"   j = {j_1indexed}: a_{j_1indexed} = {a_j:.4f}, a_{j_1indexed+1} = {a_j1:.4f}")
        if condition:
            steps.append(f"     {a_j:.4f} < {a_j1:.4f} - ДА, добавляем j = {j_1indexed}")
            result.append(j_1indexed)
        else:
            steps.append(f"     {a_j:.4f} < {a_j1:.4f} - НЕТ")
    
    if result:
        steps.append(f"4. Найдены индексы: {result}")
    else:
        steps.append("4. Не найдено ни одного индекса, удовлетворяющего условию.")
    
    detailed_explanation = "\n".join(steps)
    return result, detailed_explanation


def main():
    """
    Основная функция программы с выбором режима работы:
    1. Использовать примеры
    2. Ввести свои данные
    """
    print("Программа поиска индексов j (2 ≤ j ≤ n-1), для которых aⱼ < aⱼ₊₁")
    print("=" * 70)
    print("Находит все натуральные j в диапазоне от 2 до n-1,")
    print("для которых текущий элемент меньше следующего.")
    print("=" * 70)
    
    choice = input("Выберите режим:\n1 - Использовать примеры\n2 - Ввести свои данные\nВведите 1 или 2: ")
    
    if choice == '1':
        # Примеры для демонстрации
        examples = [
            ("Пример 1 (случайные числа)", 7, [1.5, 2.3, 1.8, 3.2, 2.9, 4.1, 3.5]),
            ("Пример 2 (возрастающая последовательность)", 6, [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]),
            ("Пример 3 (убывающая последовательность)", 5, [5.0, 4.0, 3.0, 2.0, 1.0]),
            ("Пример 4 (n < 3)", 2, [1.0, 2.0]),
            ("Пример 5 (одинаковые значения)", 6, [2.0, 2.0, 2.0, 2.0, 2.0, 2.0]),
            ("Пример 6 (чередование)", 8, [1.0, 3.0, 2.0, 4.0, 3.0, 5.0, 4.0, 6.0]),
        ]
        
        for title, n, a in examples:
            print(f"\n{title}:")
            print(f"n = {n}, a = {a}")
            
            result = find_increasing_indices(n, a)
            
            if result:
                print(f"Индексы j (2 ≤ j ≤ {n-1}), где aⱼ < aⱼ₊₁: {result}")
            else:
                print(f"Нет индексов j (2 ≤ j ≤ {n-1}), удовлетворяющих условию.")
            
            # Для первого примера предлагаем показать детали
            if title == "Пример 1 (случайные числа)":
                detailed_choice = input("\nПоказать подробное решение для этого примера? (да/нет): ")
                if detailed_choice.lower() in ['да', 'д', 'yes', 'y']:
                    result_detailed, explanation = find_increasing_indices_detailed(n, a)
                    print("\nПодробное решение:")
                    print(explanation)
            
            print("-" * 60)
    
    elif choice == '2':
        # Ввод данных от пользователя
        try:
            n = int(input("\nВведите натуральное число n: "))
            if n <= 0:
                print("Ошибка: n должно быть натуральным числом!")
                return
            
            a = []
            for i in range(n):
                value = float(input(f"Введите a_{i+1}: "))
                a.append(value)
            
            print(f"\nВведена последовательность: a = {a}")
            
            # Вычисление результата
            result = find_increasing_indices(n, a)
            
            if result:
                print(f"\nИндексы j (2 ≤ j ≤ {n-1}), где aⱼ < aⱼ₊₁: {result}")
            else:
                print(f"\nНет индексов j (2 ≤ j ≤ {n-1}), удовлетворяющих условию.")
            
            # Предложение показать подробное решение
            detailed_choice = input("\nПоказать подробное решение? (да/нет): ")
            if detailed_choice.lower() in ['да', 'д', 'yes', 'y']:
                result_detailed, explanation = find_increasing_indices_detailed(n, a)
                print("\nПодробное решение:")
                print(explanation)
        
        except ValueError:
            print("Ошибка ввода! Убедитесь, что вводите числа в правильном формате.")
            return
    
    else:
        print("Неверный выбор. Программа завершена.")
        return
    
    # Пояснение алгоритма
    print("\n" + "=" * 70)
    print("ПОЯСНЕНИЕ АЛГОРИТМА:")
    print("=" * 70)
    print("1. Проверяем, что n ≥ 3 (иначе диапазон 2 ≤ j ≤ n-1 пуст)")
    print("2. Для каждого j от 2 до n-1 (включительно):")
    print("   - Берем элемент aⱼ и следующий элемент aⱼ₊₁")
    print("   - Проверяем условие aⱼ < aⱼ₊₁")
    print("   - Если условие выполняется, добавляем j в результат")
    print("3. Возвращаем все найденные индексы j")
    print("=" * 70)
    
    # Статистика
    print("\n" + "=" * 70)
    print("СТАТИСТИКА И ИНТЕРПРЕТАЦИЯ:")
    print("=" * 70)
    print("Найденные индексы указывают на позиции, где последовательность")
    print("локально возрастает (текущий элемент меньше следующего).")
    print("Это может быть полезно для анализа трендов в данных.")
    print("=" * 70)
    
    # Дополнительный анализ для последнего примера
    if choice == '2':
        print("\n" + "=" * 70)
        print("ДОПОЛНИТЕЛЬНЫЙ АНАЛИЗ:")
        print("=" * 70)
        print("Процент возрастающих переходов: ", end="")
        if n >= 3:
            total_transitions = n-2  # количество проверяемых пар (от 2 до n-1)
            if total_transitions > 0:
                percentage = (len(result) / total_transitions) * 100
                print(f"{percentage:.1f}% ({len(result)} из {total_transitions})")
            else:
                print("0% (нет переходов для анализа)")
        else:
            print("n < 3, анализ невозможен")
        print("=" * 70)


if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
