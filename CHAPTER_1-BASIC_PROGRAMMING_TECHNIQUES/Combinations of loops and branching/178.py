"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

178. Даны натуральные числа n, a1, …, an. Определить количество членов ak последовательности a1, ..., an:
а) являющихся нечетными числами;
б) кратных 3 и не кратных 5;
в) являющихся квадратами четных чисел;
г) удовлетворяющих условию ak < (ak-1 + ak+1) / 2;
д) удовлетворяющих условию 2^k < ak < k!;
е) имеющих четные порядковые номера и являющихся
нечетными числами.
"""


import math

def main():
    # Ввод количества чисел
    n = int(input("Введите натуральное число n: "))
    
    if n <= 0:
        print("Ошибка: n должно быть натуральным числом!")
        return
    
    # Ввод последовательности чисел
    a = []
    print(f"Введите {n} натуральных чисел:")
    for i in range(n):
        while True:
            try:
                num = int(input(f"a[{i+1}]: "))
                if num > 0:
                    a.append(num)
                    break
                else:
                    print("Число должно быть натуральным (положительным целым)!")
            except ValueError:
                print("Пожалуйста, введите целое число!")
    
    # Инициализация счетчиков
    count_a = 0  # нечетные числа
    count_b = 0  # кратные 3 и не кратные 5
    count_c = 0  # квадраты четных чисел
    count_d = 0  # ak < (a_{k-1} + a_{k+1}) / 2
    count_e = 0  # 2^k < ak < k!
    count_f = 0  # четные порядковые номера и нечетные числа
    
    # Вычисление факториалов для условия (д)
    factorials = [1] * (n + 1)  # факториалы от 0 до n
    for i in range(1, n + 1):
        factorials[i] = factorials[i-1] * i
    
    # Перебираем все элементы последовательности
    for k in range(n):  # индексы от 0 до n-1
        ak = a[k]
        k_index = k + 1  # порядковый номер (начинается с 1)
        
        # а) Нечетные числа
        if ak % 2 != 0:
            count_a += 1
        
        # б) Кратные 3 и не кратные 5
        if ak % 3 == 0 and ak % 5 != 0:
            count_b += 1
        
        # в) Являются квадратами четных чисел
        # Проверяем, является ли число полным квадратом
        sqrt_ak = int(math.sqrt(ak))
        if sqrt_ak * sqrt_ak == ak and sqrt_ak % 2 == 0:
            count_c += 1
        
        # г) ak < (a_{k-1} + a_{k+1}) / 2
        # Проверяем только для внутренних элементов (со 2-го до предпоследнего)
        if 1 <= k <= n-2:  # k от 1 до n-2 в 0-индексации соответствует порядковым номерам от 2 до n-1
            avg = (a[k-1] + a[k+1]) / 2
            if ak < avg:
                count_d += 1
        
        # д) 2^k < ak < k!
        two_power_k = 2 ** k_index
        factorial_k = factorials[k_index]
        if two_power_k < ak < factorial_k:
            count_e += 1
        
        # е) Четные порядковые номера и нечетные числа
        if k_index % 2 == 0 and ak % 2 != 0:
            count_f += 1
    
    # Вывод результатов
    print("\nРезультаты:")
    print(f"а) Количество нечетных чисел: {count_a}")
    print(f"б) Количество чисел, кратных 3 и не кратных 5: {count_b}")
    print(f"в) Количество квадратов четных чисел: {count_c}")
    print(f"г) Количество чисел, удовлетворяющих условию ak < (a_{{k-1}} + a_{{k+1}}) / 2: {count_d}")
    print(f"д) Количество чисел, удовлетворяющих условию 2^k < ak < k!: {count_e}")
    print(f"е) Количество чисел с четными порядковыми номерами, являющихся нечетными: {count_f}")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
