"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

204. В некоторых видах спортивных состязаний выступление
каждого спортсмена независимо оценивается несколькими судьями,
затем из всей совокупности оценок удаляются наиболее высокая и
наиболее низкая, а для оставшихся оценок вычисляется среднее
арифметическое, которое и идет в зачет спортсмену. Если наиболее
высокую оценку выставило несколько судей, то из совокупности
оценок удаляется только одна такая оценка; аналогично поступают с
наиболее низкими оценками.
Даны натуральное число n, действительные положительные
числа a1, … , an(n ≥ 3). Считая, что числа a1, … , an – это оценки,
выставленные судьями одному из участников соревнований,
определить оценку, которая пойдет в зачет этому спортсмену.
"""


def calculate_final_score_detailed(n, scores):
    """
    Более подробная версия с пошаговыми пояснениями.
    """
    if n < 3:
        return "Ошибка: должно быть не менее 3 оценок"
    
    print("Шаги расчета:")
    print(f"1. Исходные оценки: {scores}")
    
    # Шаг 1: Находим минимальную оценку
    min_score = min(scores)
    print(f"2. Находим минимальную оценку: {min_score}")
    
    # Шаг 2: Находим максимальную оценку
    max_score = max(scores)
    print(f"3. Находим максимальную оценку: {max_score}")
    
    # Шаг 3: Удаляем одну минимальную оценку
    scores_without_min = scores.copy()
    scores_without_min.remove(min_score)
    print(f"4. Удаляем одну минимальную оценку: {scores_without_min}")
    
    # Шаг 4: Удаляем одну максимальную оценку
    # Важно: если min_score == max_score, то после первого удаления
    # максимальное значение останется тем же
    scores_final = scores_without_min.copy()
    scores_final.remove(max_score)
    print(f"5. Удаляем одну максимальную оценку: {scores_final}")
    
    # Шаг 5: Вычисляем среднее арифметическое
    average_score = sum(scores_final) / len(scores_final)
    print(f"6. Вычисляем среднее арифметическое: {sum(scores_final)} / {len(scores_final)} = {average_score:.2f}")
    
    return average_score


# Примеры работы программы
print("Пример 1:")
scores1 = [9.5, 8.0, 9.0, 9.5, 8.5, 9.0]
result1 = calculate_final_score_detailed(6, scores1)
print(f"\nИтоговая оценка: {result1:.2f}\n")

print("Пример 2 (все оценки одинаковые):")
scores2 = [8.0, 8.0, 8.0, 8.0]
result2 = calculate_final_score_detailed(4, scores2)
print(f"\nИтоговая оценка: {result2:.2f}\n")

print("Пример 3 (несколько одинаковых минимальных и максимальных):")
scores3 = [5.0, 9.5, 8.0, 9.5, 5.0, 8.5]
result3 = calculate_final_score_detailed(6, scores3)
print(f"\nИтоговая оценка: {result3:.2f}")
