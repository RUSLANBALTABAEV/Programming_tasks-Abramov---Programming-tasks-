"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

220. Рассматривается последовательность a1, …, a1000. Требуется определить, сколько членов последовательности с номерами 1, 2, 4, 8, 16, … имеют значение, меньшее, чем 0.25 . При этом считать, что 
а) ak = sin(3 * k + 5) ^ 2 - cos(k ^ 2 - 15) ^ 2, k = 1, 2, ..., 1000;
б) a1, ..., a1000 - заданные действительные числа;
в) a1 = 0.01; ak = sin(k + ak-1), k = 2, ..., 1000.
"""


import math

def case_a():
    """Случай а: a_k = sin^2(3k+5) - cos^2(k^2-15)"""
    print("Случай а: a_k = sin^2(3k+5) - cos^2(k^2-15)")
    print("k    a_k")
    print("-" * 25)
    
    count = 0
    k = 1
    while k <= 1000:
        # Вычисляем a_k по формуле
        a_k = math.sin(3*k + 5)**2 - math.cos(k**2 - 15)**2
        
        # Выводим только для степеней двойки
        if k & (k - 1) == 0:  # Проверка, является ли k степенью двойки
            print(f"{k:<4} {a_k:.6f}")
            if a_k < 0.25:
                count += 1
        
        k <<= 1  # Умножаем k на 2 (переход к следующей степени двойки)
    
    return count

def case_b():
    """Случай б: a_1,...,a_1000 - заданные действительные числа"""
    print("Случай б: a_1,...,a_1000 - заданные действительные числа")
    
    # Ввод 1000 чисел
    print(f"Введите 1000 действительных чисел через пробел:")
    numbers_input = input()
    numbers = list(map(float, numbers_input.split()))
    
    if len(numbers) < 1000:
        print(f"Предупреждение: введено только {len(numbers)} чисел. Остальные будут заполнены нулями.")
        numbers.extend([0.0] * (1000 - len(numbers)))
    elif len(numbers) > 1000:
        print(f"Введено {len(numbers)} чисел. Будут использованы первые 1000.")
        numbers = numbers[:1000]
    
    # Подсчет членов с номерами - степенями двойки, которые < 0.25
    count = 0
    print("\nПроверяемые элементы (степени двойки):")
    print("k    a_k")
    print("-" * 25)
    
    k = 1
    while k <= 1000:
        # Индексация в Python с 0, поэтому k-1
        a_k = numbers[k-1]
        print(f"{k:<4} {a_k:.6f}")
        if a_k < 0.25:
            count += 1
        
        k <<= 1  # Умножаем на 2
    
    return count

def case_c():
    """Случай в: a_1 = 0.01; a_k = sin(k + a_{k-1})"""
    print("Случай в: a_1 = 0.01; a_k = sin(k + a_{k-1})")
    print("k    a_k")
    print("-" * 25)
    
    # Инициализация массива для последовательности
    a = [0.0] * 1000
    
    # Первый элемент
    a[0] = 0.01
    
    # Вычисление остальных элементов
    for k in range(2, 1001):  # k от 2 до 1000
        a[k-1] = math.sin(k + a[k-2])
    
    # Подсчет членов с номерами - степенями двойки, которые < 0.25
    count = 0
    k = 1
    while k <= 1000:
        print(f"{k:<4} {a[k-1]:.6f}")
        if a[k-1] < 0.25:
            count += 1
        
        k <<= 1  # Умножаем на 2
    
    return count

def main():
    print("220. Анализ последовательности a_1,...,a_1000")
    print("Определение количества членов с номерами 1,2,4,8,16,... < 0.25")
    print("=" * 60)
    
    while True:
        print("\nВыберите вариант:")
        print("а) a_k = sin^2(3k+5) - cos^2(k^2-15)")
        print("б) a_1,...,a_1000 - заданные действительные числа")
        print("в) a_1 = 0.01; a_k = sin(k + a_{k-1})")
        print("г) Выход")
        
        choice = input("Ваш выбор (а/б/в/г): ").strip().lower()
        
        if choice == 'а' or choice == 'a':
            count = case_a()
            print(f"\nКоличество членов (степеней двойки) < 0.25: {count}")
        
        elif choice == 'б' or choice == 'b':
            count = case_b()
            print(f"\nКоличество членов (степеней двойки) < 0.25: {count}")
        
        elif choice == 'в' or choice == 'c':
            count = case_c()
            print(f"\nКоличество членов (степеней двойки) < 0.25: {count}")
        
        elif choice == 'г' or choice == 'd' or choice == 'г':
            print("Выход из программы.")
            break
        
        else:
            print("Неверный выбор. Попробуйте еще раз.")
        
        input("\nНажмите Enter для продолжения...")

if __name__ == "__main__":
    main()
