"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

232. Даны натуральное число n, действительные числа a, x1, …,
xn (x1<=x2<=...<=xn). Получить последовательность y1, …, yn+1, членами
которой являются члены последовательности x1, …, xn и значение а, такую, что y1<=y2<=...<=yn+1.
"""


def main():
    print("232. Вставка числа a в отсортированную последовательность")
    print("=" * 60)
    
    try:
        # Ввод натурального числа n
        n = int(input("Введите натуральное число n: "))
        
        if n <= 0:
            print("Ошибка: n должно быть натуральным числом (n > 0)")
            return
        
        # Ввод числа a
        a = float(input("Введите действительное число a: "))
        
        # Ввод отсортированной последовательности x
        print(f"Введите {n} действительных чисел x1 ≤ x2 ≤ ... ≤ xn через пробел:")
        x_input = input()
        x = list(map(float, x_input.split()))
        
        if len(x) != n:
            print(f"Ошибка: введено {len(x)} чисел вместо {n}")
            return
        
        # Проверка отсортированности (можно пропустить, но для надежности проверим)
        is_sorted = all(x[i] <= x[i+1] for i in range(n-1))
        if not is_sorted:
            print("Предупреждение: последовательность x не отсортирована по условию.")
            print("Сортировка последовательности...")
            x.sort()
        
        # Метод 1: Поиск позиции вставки и создание нового массива
        print("\nМетод 1: Поиск позиции вставки")
        
        # Находим позицию для вставки a
        insert_pos = 0
        for i in range(n):
            if a > x[i]:
                insert_pos = i + 1
            else:
                break
        
        # Создаем новый массив y
        y = []
        for i in range(n):
            if i == insert_pos:
                y.append(a)
            y.append(x[i])
        
        # Если a больше всех элементов, добавляем в конец
        if insert_pos == n:
            y.append(a)
        
        # Метод 2: Просто добавить и отсортировать (более простой способ)
        print("\nМетод 2: Добавление и сортировка")
        y2 = x.copy()
        y2.append(a)
        y2.sort()
        
        # Вывод результатов
        print(f"\nИсходная отсортированная последовательность x:")
        for i, val in enumerate(x, 1):
            print(f"  x{i} = {val}")
        
        print(f"\nЧисло для вставки: a = {a}")
        
        print(f"\nРезультат после вставки (длина {len(y)}):")
        print(f"Метод 1 (поиск позиции): y = {y}")
        print(f"Метод 2 (сортировка):     y = {y2}")
        
        # Проверка совпадения результатов
        if y == y2:
            print("✓ Результаты обоих методов совпадают")
        else:
            print("✗ Результаты методов различны")
        
        # Проверка отсортированности результата
        is_y_sorted = all(y[i] <= y[i+1] for i in range(len(y)-1))
        if is_y_sorted:
            print("✓ Результирующая последовательность отсортирована")
        else:
            print("✗ Ошибка: результирующая последовательность не отсортирована")
        
        # Дополнительная информация
        print("\n" + "=" * 60)
        print("Дополнительная информация:")
        
        # Находим точную позицию вставки
        print(f"Число a = {a} должно быть вставлено:")
        
        if n == 0:
            print("  В пустую последовательность (единственный элемент)")
        elif a <= x[0]:
            print(f"  В начало последовательности, перед x1 = {x[0]}")
        elif a >= x[-1]:
            print(f"  В конец последовательности, после x{n} = {x[-1]}")
        else:
            # Находим диапазон, куда попадает a
            for i in range(n-1):
                if x[i] <= a <= x[i+1]:
                    print(f"  Между x{i+1} = {x[i]} и x{i+2} = {x[i+1]}")
                    print(f"  Индекс вставки: {i+1} (после x{i+1})")
                    break
        
        # Статистика
        print("\nСтатистика:")
        print(f"Длина исходной последовательности: {n}")
        print(f"Длина результирующей последовательности: {len(y)}")
        
        # Количество элементов, меньших, равных и больших a
        less_count = sum(1 for val in x if val < a)
        equal_count = sum(1 for val in x if val == a)
        greater_count = sum(1 for val in x if val > a)
        
        print(f"В исходной последовательности:")
        print(f"  Элементов меньше a: {less_count}")
        print(f"  Элементов равных a: {equal_count}")
        print(f"  Элементов больше a: {greater_count}")
        
        # Визуализация вставки
        print("\nВизуализация вставки:")
        print("Исходная последовательность x: ", end="")
        for i, val in enumerate(x, 1):
            print(f"x{i}={val:.2f}", end=" ")
        print()
        
        print("Число для вставки a: ", end="")
        print(f"a={a:.2f}")
        
        print("Результирующая последовательность y: ", end="")
        for i, val in enumerate(y, 1):
            if abs(val - a) < 1e-10:  # Проверка на равенство с учетом погрешности float
                print(f"y{i}=[{val:.2f}]", end=" ")  # Выделяем вставленный элемент
            else:
                print(f"y{i}={val:.2f}", end=" ")
        print()
        
    except ValueError:
        print("Ошибка ввода: проверьте, что введены корректные числа")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
