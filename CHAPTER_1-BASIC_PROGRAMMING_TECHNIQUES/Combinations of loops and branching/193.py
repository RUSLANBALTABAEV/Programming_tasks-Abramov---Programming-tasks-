"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

193. Пусть x0 = a; xk = q * xk-1 + b, (k = 1,2, …). Даны неотрицательное целое n, действительные a, b, c, d, q ( c < d ).
Принадлежит ли xn интервалу ( c, d )?
"""


import math

def main():
    print("Определение принадлежности x_n интервалу (c, d)")
    print("где x_0 = a; x_k = q * x_{k-1} + b, (k = 1, 2, ...)")
    
    # Ввод данных
    while True:
        try:
            n = int(input("Введите неотрицательное целое n: "))
            if n >= 0:
                break
            else:
                print("n должно быть неотрицательным!")
        except ValueError:
            print("Пожалуйста, введите целое число!")
    
    a = float(input("Введите действительное число a: "))
    b = float(input("Введите действительное число b: "))
    q = float(input("Введите действительное число q: "))
    
    while True:
        c = float(input("Введите действительное число c (левая граница интервала): "))
        d = float(input("Введите действительное число d (правая граница интервала): "))
        if c < d:
            break
        else:
            print("Ошибка: должно выполняться условие c < d!")
    
    # Вычисление x_n
    if abs(q - 1.0) < 1e-12:  # проверка на равенство 1 с учетом погрешности
        # Случай q = 1
        x_n = a + n * b
    else:
        # Общая формула при q ≠ 1
        q_pow_n = q ** n
        x_n = a * q_pow_n + b * (1 - q_pow_n) / (1 - q)
    
    # Проверка принадлежности интервалу (c, d)
    belongs = c < x_n < d
    
    # Вывод результатов
    print("\nРезультаты:")
    print(f"x_n = {x_n:.10f}")
    print(f"Интервал: ({c}, {d})")
    
    if belongs:
        print(f"x_n принадлежит интервалу ({c}, {d})")
    else:
        print(f"x_n НЕ принадлежит интервалу ({c}, {d})")

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
