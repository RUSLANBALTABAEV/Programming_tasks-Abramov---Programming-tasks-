"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

203. У прилавка в магазине выстроилась очередь из n покупателей. 
Время обслуживания продавцом i–го покупателя равно ti (i = 1, … , n). 
Пусть даны натуральное n и действительные t1, … , tn.
Получить c1, … , cn, где ci – время пребывания i–го покупателя в
очереди (i = 1, … , n). Указать номер покупателя, для обслуживания
которого продавцу потребовалось самое малое время.
"""

def calculate_queue_times(n, t):
    """
    n: натуральное число (количество покупателей)
    t: список времен обслуживания [t₁, t₂, ..., tₙ]
    Возвращает список времён пребывания в очереди и номер покупателя с минимальным временем обслуживания.
    """
    # Массив времён пребывания в очереди
    c = [0] * n
    
    # Вычисляем время пребывания в очереди для каждого покупателя
    for i in range(1, n):
        c[i] = c[i-1] + t[i-1]
    
    # Находим покупателя с минимальным временем обслуживания
    min_time = min(t)
    # Индекс минимального элемента (в 1-индексации, поэтому +1)
    min_index = t.index(min_time) + 1
    
    return c, min_index


def main():
    """
    Основная функция программы с выбором режима работы:
    1. Использовать пример из кода
    2. Ввести свои данные
    """
    print("Программа расчета времени пребывания покупателей в очереди")
    print("=" * 60)
    
    choice = input("Выберите режим:\n1 - Использовать пример из кода\n2 - Ввести свои данные\nВведите 1 или 2: ")
    
    if choice == '1':
        # Используем пример из кода
        n = 5
        t = [2.5, 1.8, 3.2, 0.9, 2.1]
        print(f"\nИспользуется пример: n = {n}, t = {t}")
    elif choice == '2':
        # Ввод данных от пользователя
        try:
            n = int(input("\nВведите количество покупателей n: "))
            if n <= 0:
                print("Ошибка: n должно быть натуральным числом!")
                return
            
            t = []
            for i in range(n):
                while True:
                    try:
                        value = float(input(f"Введите время обслуживания t_{i+1}: "))
                        if value <= 0:
                            print("Время обслуживания должно быть положительным числом!")
                            continue
                        t.append(value)
                        break
                    except ValueError:
                        print("Ошибка! Введите число в правильном формате (например: 2.5)")
            print(f"\nВведены времена обслуживания: t = {t}")
        except ValueError:
            print("Ошибка ввода! Убедитесь, что вводите числа в правильном формате.")
            return
    else:
        print("Неверный выбор. Программа завершена.")
        return
    
    # Вычисление результатов
    c, min_index = calculate_queue_times(n, t)
    
    # Вывод результатов в виде таблицы
    print("\nРезультаты расчета:")
    print("=" * 60)
    print(f"{'Покупатель':^12} {'Время обслуживания':^20} {'Время в очереди':^20}")
    print("-" * 60)
    
    for i in range(n):
        print(f"{i+1:^12} {t[i]:^20.2f} {c[i]:^20.2f}")
    
    print("=" * 60)
    
    # Дополнительная информация
    print(f"\nДополнительная информация:")
    print(f"- Первый покупатель не ждет в очереди.")
    print(f"- Каждый следующий покупатель ждет, пока обслужат всех предыдущих.")
    
    # Находим всех покупателей с минимальным временем обслуживания
    min_time = min(t)
    min_indices = [i+1 for i, time in enumerate(t) if time == min_time]
    
    if len(min_indices) == 1:
        print(f"\nПокупатель с минимальным временем обслуживания: №{min_index} (время: {min_time:.2f})")
    else:
        print(f"\nМинимальное время обслуживания имеют несколько покупателей:")
        print(f"Время: {min_time:.2f}")
        print(f"Номера покупателей: {', '.join(map(str, min_indices))}")
    
    # Общее время обслуживания всех покупателей
    total_service_time = sum(t)
    print(f"\nОбщее время обслуживания всех покупателей: {total_service_time:.2f}")
    print(f"Общее время ожидания в очереди (сумма всех cᵢ): {sum(c):.2f}")
    
    print("=" * 60)


if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
