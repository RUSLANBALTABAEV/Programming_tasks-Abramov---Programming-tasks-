"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
2. Разветвления
52. Даны действительные числа a, b, c, d, s, t, u (s и t
одновременно не равны нулю). Известно, что точки (a, b) и (c, d) не
лежат на прямой l, заданной уравнением s * x + t * y + u = 0. Прямая l разбивает координатную плоскость на две полуплоскости.
Выяснить, верно ли, что точки (a, b) и (c, d) принадлежать разным полуплоскостям*). 
*) В этой задаче, как и в ряде следующих задач, надо воспользоваться
тем, что две точки (a, b) и (c, d), не лежащие на прямой, определяемой
уравнением s * x + t * y + u = 0, принадлежат одной полуплоскости,
если s * a + t * b + u и s * c + t * d + u - числа одного знака. Справедлив и
более общий факт: если уравнение F(x, y) = 0 определяет прямую или 
кривую, разбивающую координатную плоскость на две части, то точки (a, b) и (c, d), не лежащие на этой линии, принадлежат одной и той же
части плоскости, если F(a, b) и F(c, d) - числа одного знака.
"""


def calculate_line_value(s, t, u, x, y):
    """
    Вычисляет значение выражения sx + ty + u для точки (x, y).
    
    Args:
        s, t, u: Коэффициенты уравнения прямой sx + ty + u = 0
        x, y: Координаты точки
    
    Returns:
        float: Значение sx + ty + u
    """
    return s * x + t * y + u


def points_on_different_sides(s, t, u, a, b, c, d):
    """
    Определяет, принадлежат ли точки (a, b) и (c, d) разным полуплоскостям.
    
    Args:
        s, t, u: Коэффициенты уравнения прямой
        a, b: Координаты первой точки
        c, d: Координаты второй точки
    
    Returns:
        tuple: (different_sides, value1, value2)
               different_sides - bool, принадлежат ли точки разным сторонам
               value1 - значение для точки (a, b)
               value2 - значение для точки (c, d)
    """
    # Вычисляем значения для обеих точек
    value1 = calculate_line_value(s, t, u, a, b)
    value2 = calculate_line_value(s, t, u, c, d)
    
    # Точки принадлежат разным полуплоскостям, если произведение отрицательно
    different_sides = value1 * value2 < 0
    
    return different_sides, value1, value2


def main():
    """Основная функция программы."""
    print("Определение положения двух точек относительно прямой")
    print("=" * 75)
    
    try:
        # Ввод коэффициентов прямой
        print("Введите коэффициенты уравнения прямой sx + ty + u = 0:")
        s = float(input("  s = "))
        t = float(input("  t = "))
        u = float(input("  u = "))
        
        # Проверка, что s и t не равны нулю одновременно
        if s == 0 and t == 0:
            print("Ошибка: коэффициенты s и t не могут быть одновременно равны нулю!")
            return
        
        print()
        
        # Ввод координат первой точки
        print("Введите координаты первой точки (a, b):")
        a = float(input("  a = "))
        b = float(input("  b = "))
        
        print()
        
        # Ввод координат второй точки
        print("Введите координаты второй точки (c, d):")
        c = float(input("  c = "))
        d = float(input("  d = "))
        
        print("=" * 75)
        
        # Формируем уравнение прямой
        line_eq = ""
        if s != 0:
            line_eq += f"{s}x"
        if t != 0:
            if line_eq and t > 0:
                line_eq += f" + {t}y"
            elif line_eq and t < 0:
                line_eq += f" - {abs(t)}y"
            else:
                line_eq += f"{t}y"
        if u != 0:
            if u > 0:
                line_eq += f" + {u}"
            else:
                line_eq += f" - {abs(u)}"
        line_eq += " = 0"
        
        print(f"Уравнение прямой: {line_eq}")
        print(f"Точка A: ({a}, {b})")
        print(f"Точка B: ({c}, {d})")
        print("-" * 75)
        
        # Проверяем положение точек
        different_sides, value1, value2 = points_on_different_sides(
            s, t, u, a, b, c, d
        )
        
        # Вычисляем значения выражений
        print("Подстановка точек в уравнение прямой:")
        print(f"  Для точки A({a}, {b}): "
              f"{s}·{a} + {t}·{b} + {u} = {value1:.6f}")
        print(f"  Для точки B({c}, {d}): "
              f"{s}·{c} + {t}·{d} + {u} = {value2:.6f}")
        print("-" * 75)
        
        # Анализ знаков
        if value1 == 0:
            print(f"⚠ Точка A лежит НА прямой")
        elif value1 > 0:
            print(f"Точка A: значение положительно ({value1:.6f} > 0)")
        else:
            print(f"Точка A: значение отрицательно ({value1:.6f} < 0)")
        
        if value2 == 0:
            print(f"⚠ Точка B лежит НА прямой")
        elif value2 > 0:
            print(f"Точка B: значение положительно ({value2:.6f} > 0)")
        else:
            print(f"Точка B: значение отрицательно ({value2:.6f} < 0)")
        
        print("-" * 75)
        
        # Проверяем, не лежат ли точки на прямой
        if value1 == 0 or value2 == 0:
            print("⚠ Одна или обе точки лежат на прямой")
            print("  Нельзя однозначно определить принадлежность полуплоскостям")
        else:
            # Выводим результат
            print(f"Произведение значений: {value1:.6f} × {value2:.6f} = "
                  f"{value1 * value2:.6f}")
            print()
            
            if different_sides:
                print("✓ Точки принадлежат РАЗНЫМ полуплоскостям")
                print("  (произведение отрицательно, знаки различны)")
            else:
                print("✗ Точки принадлежат ОДНОЙ И ТОЙ ЖЕ полуплоскости")
                print("  (произведение положительно, знаки одинаковы)")
        
        print("=" * 75)
        
    except ValueError:
        print("Ошибка: необходимо вводить числа!")


if __name__ == "__main__":
    main()

input("\nНажмите Enter, чтобы завершить программу.")
