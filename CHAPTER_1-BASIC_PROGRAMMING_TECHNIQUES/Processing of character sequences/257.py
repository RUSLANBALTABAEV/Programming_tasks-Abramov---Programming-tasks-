"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

257. Даны символы s1, s2, … Известно, что символ s1 отличен от
восклицательного знака и что среди s2, s3,. .. есть по крайней мере один восклицательный знак. Пусть s1, …, sn – символы данной
последовательности, предшествующие первому восклицательному знаку (n заранее неизвестно).
а) Определить количество пробелов среди s1, …, sn.
б) Выяснить, входит ли в последовательность s1, …, sn буква ю.
в) Выяснить, верно ли, что среди s1, …, sn имеются все буквы, входящие в слово шина.
г) Выяснить, имеется ли среди s1, …, sn пара соседствующих букв но или он.
д) Выяснить, имеется ли среди s1, …, sn пара соседствующих одинаковых символов.
е) Выяснить, верно ли, что существуют такие натуральные i и j, что 1 < i < j < n и что si совпадает с si+1, а sj – с sj+1.
"""


def main():
    print("=== Задача 257 ===")
    print("Обработка последовательности символов до первого восклицательного знака")
    print()
    
    # Ввод данных
    input_str = input("Введите последовательность символов (обязательно содержащую '!'): ")
    
    # Находим первый восклицательный знак
    exclamation_pos = input_str.find('!')
    if exclamation_pos == -1:
        print("Ошибка: в последовательности нет восклицательного знака.")
        print("По условию среди символов (начиная со второго) должен быть '!'.")
        return
    
    # Последовательность до первого '!' (не включая его)
    s = input_str[:exclamation_pos]
    n = len(s)
    
    print(f"\nПоследовательность до первого '!': '{s}'")
    print(f"Длина n = {n}")
    
    if n == 0:
        print("Последовательность пуста (s1 был '!'? но по условию s1 не '!', так что n >=1).")
        print("Возможно, '!' стоит на первом месте? Но тогда s1 - '!', что запрещено.")
        print("По условию s1 не '!', так что перед '!' должен быть хотя бы один символ.")
        return
    
    # а) Количество пробелов
    space_count = s.count(' ')
    print(f"\nа) Количество пробелов среди s1,...,sn: {space_count}")
    
    # б) Входит ли буква 'н'
    has_n = 'н' in s
    print(f"б) Буква 'н' входит в последовательность? {'Да' if has_n else 'Нет'}")
    
    # в) Все ли буквы из слова "шина" присутствуют
    word = "шина"
    letters_present = all(letter in s for letter in word)
    print(f"в) Все буквы из слова '{word}' присутствуют? {'Да' if letters_present else 'Нет'}")
    if not letters_present:
        missing = [letter for letter in word if letter not in s]
        print(f"   Отсутствуют буквы: {missing}")
    
    # г) Имеется ли пара соседствующих букв "но" или "он"
    has_no = False
    for i in range(n-1):
        pair = s[i] + s[i+1]
        if pair == "но" or pair == "он":
            has_no = True
            break
    print(f"г) Пара соседствующих букв 'но' или 'он' имеется? {'Да' if has_no else 'Нет'}")
    
    # д) Имеется ли пара соседствующих одинаковых символов
    has_same_adjacent = False
    for i in range(n-1):
        if s[i] == s[i+1]:
            has_same_adjacent = True
            break
    print(f"д) Пара соседствующих одинаковых символов имеется? {'Да' if has_same_adjacent else 'Нет'}")
    
    # е) Существуют ли две разные пары одинаковых соседних символов с условием 1 < i < j < n
    pairs_positions = []
    for i in range(n-1):
        if s[i] == s[i+1]:
            pos_1index = i+1  # позиция i в 1-индексации
            if pos_1index > 1:  # условие 1 < i
                pairs_positions.append(pos_1index)
    
    exists = len(pairs_positions) >= 2
    print(f"е) Существуют две разные пары одинаковых соседних символов (с условием 1 < i < j < n)? {'Да' if exists else 'Нет'}")
    if pairs_positions:
        print(f"   Найденные позиции начала пар (в 1-индексации): {pairs_positions}")
    
if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
