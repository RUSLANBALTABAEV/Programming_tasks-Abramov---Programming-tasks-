"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
7. Сочетания цикла и разветвления

264. Даны натуральное число n, символы s1, …, sn. Исключить из последовательности s1, …, sn группы символов, расположенные между скобками (,). Сами скобки тоже должны быть исключены. Предполагается, что внутри каждой пары скобок нет других скобок.
"""


def main():
    print("=== Задача 264 ===")
    print("Удаление групп символов между скобками (включая скобки)")
    print()
    
    # Ввод данных
    try:
        n = int(input("Введите натуральное число n: "))
        if n < 0:
            print("Ошибка: n должно быть натуральным числом.")
            return
        
        print(f"Введите {n} символов подряд:")
        symbols = input()
        
        # Проверка длины введенной последовательности
        if len(symbols) < n:
            print(f"Предупреждение: введено только {len(symbols)} символов. Будем использовать их.")
            n = len(symbols)
        elif len(symbols) > n:
            print(f"Предупреждение: введено {len(symbols)} символов. Будем использовать первые {n}.")
            symbols = symbols[:n]
        
        print(f"\nИсходная последовательность: '{symbols}'")
        print(f"Длина последовательности: {n}")
        
        # Удаление групп символов между скобками
        result = []
        skip = False  # Флаг, указывающий, что мы внутри скобок
        
        for ch in symbols:
            if ch == '(':
                skip = True  # Начинаем пропускать символы
                continue     # Не добавляем '(' в результат
            elif ch == ')':
                skip = False # Заканчиваем пропускать символы
                continue     # Не добавляем ')' в результат
            elif not skip:
                result.append(ch)  # Добавляем символ, если не внутри скобок
        
        # Преобразуем список в строку
        result_str = ''.join(result)
        
        print(f"\nРезультат после удаления: '{result_str}'")
        print(f"Длина результата: {len(result_str)}")
        
        # Статистика
        print(f"\nСтатистика:")
        print(f"Количество '(' в исходной строке: {symbols.count('(')}")
        print(f"Количество ')' в исходной строке: {symbols.count(')')}")
        
        # Проверка на корректность скобок
        open_brackets = 0
        close_brackets = 0
        for ch in symbols:
            if ch == '(':
                open_brackets += 1
            elif ch == ')':
                close_brackets += 1
        
        if open_brackets == close_brackets:
            print(f"Скобки сбалансированы: {open_brackets} пар")
        else:
            print(f"Скобки НЕ сбалансированы: {open_brackets} открывающих, {close_brackets} закрывающих")
            
    except ValueError:
        print("Ошибка: n должно быть натуральным числом.")
        return

if __name__ == "__main__":
    main()
    input("\n\nНажмите Enter, чтобы завершить программу.")
