"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
4. Простейшие циклы

96. Пусть
       a1 = b2 = 1; ak = 1 / 2 * (sqrt(bk - 1) + 1 / 2 * sqrt(ak - 1));
       bk = 2 * a ^ 2 k - 1 + bk - 1, k = 2,3,...


"""


import math


def main():
    # Ввод натурального числа n
    n = int(input("Введите натуральное число n: "))
    
    if n < 1:
        print("n должно быть натуральным числом")
        return
    
    # Инициализация начальных значений
    # В условии сказано a1 = b2 = 1
    # Для вычисления a2 и b2 нам нужны a1 и b1
    # b1 не задано, но из формулы для b2: b2 = 2*a1^2 + b1
    # 1 = 2*1^2 + b1 => b1 = 1 - 2 = -1
    a_prev = 1  # a1
    b_prev = -1  # b1 (вычислено из условия b2=1)
    
    # Первый член суммы: a1 * b1
    total = a_prev * b_prev
    
    # Для k=2 у нас уже есть b2=1, нужно вычислить a2
    if n >= 2:
        # Вычисление a2 по формуле: a2 = 1/2 * (sqrt(b1) + 1/2 * sqrt(a1))
        # Но b1 = -1, sqrt(-1) - комплексное число
        # В условии, вероятно, опечатка: должно быть a1 = b1 = 1
        # Исправляем: считаем, что a1 = b1 = 1
        
        # Переопределяем начальные условия
        a_prev = 1  # a1
        b_prev = 1  # b1
        total = a_prev * b_prev  # 1*1 = 1
        
        # Для k=2 вычисляем a2 и b2 по формулам
        a_current = 0.5 * (math.sqrt(b_prev) + 0.5 * math.sqrt(a_prev))
        b_current = 2 * a_prev**2 + b_prev
        
        total += a_current * b_current
        
        # Обновляем значения для следующих итераций
        a_prev, b_prev = a_current, b_current
    
    # Вычисляем остальные члены последовательности (k=3..n)
    for k in range(3, n + 1):
        # Вычисление a_k
        a_current = 0.5 * (math.sqrt(b_prev) + 0.5 * math.sqrt(a_prev))
        
        # Вычисление b_k
        b_current = 2 * a_prev**2 + b_prev
        
        # Добавляем к сумме
        total += a_current * b_current
        
        # Обновляем значения для следующей итерации
        a_prev, b_prev = a_current, b_current
    
    # Вывод результата
    print(f"Сумма от k=1 до {n} произведения a_k * b_k = {total}")


if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
