"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
4. Простейшие циклы

102. Пусть x0 = 1; xk = (2 - x ^ 3 k-1) / 5, k = 1,2,... Найти первый член xn, для которого abs(xn - xn-10) < 10^-5.
"""


def main():
    # Инициализация начального значения
    x_prev = 1.0  # x0
    n = 0  # счетчик итераций
    
    # Точность
    epsilon = 1e-5
    
    # Максимальное количество итераций для предотвращения бесконечного цикла
    max_iterations = 1000
    
    print("Вычисление последовательности:")
    print(f"x_{n} = {x_prev}")
    
    # Вычисление последовательности
    while n < max_iterations:
        # Вычисление следующего члена последовательности
        x_current = (2 - x_prev**3) / 5
        n += 1  # увеличиваем счетчик
        
        print(f"x_{n} = {x_current}")
        
        # Проверка условия
        if abs(x_current - x_prev) < epsilon:
            print(f"\nНайден член x_{n} = {x_current}")
            print(f"Условие |x_{n} - x_{n-1}| < {epsilon} выполнено")
            print(f"Фактическая разность: |{x_current} - {x_prev}| = {abs(x_current - x_prev)}")
            break
        
        # Подготовка к следующей итерации
        x_prev = x_current
    else:
        print(f"\nЗа {max_iterations} итераций условие не достигнуто")
        print(f"Последнее вычисленное значение: x_{n} = {x_current}")
        print(f"Текущая разность: {abs(x_current - x_prev)}")


if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
