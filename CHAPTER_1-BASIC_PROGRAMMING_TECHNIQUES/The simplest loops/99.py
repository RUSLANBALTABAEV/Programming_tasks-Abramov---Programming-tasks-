"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
4. Простейшие циклы

99. Пусть
a1 = u, b1 = v, ak = 2bk-1 + ak-1;
bk = 2 * a ^ 2k - 1 + bk - 1, k = 2,3,...

Даны действительные u, v, натуральное n. Найти
"""


def main():
    # Ввод данных
    u = float(input("Введите действительное число u: "))
    v = float(input("Введите действительное число v: "))
    n = int(input("Введите натуральное число n: "))
    
    if n < 1:
        print("n должно быть натуральным числом")
        return
    
    # Инициализация начальных значений
    a = u  # a1
    b = v  # b1
    
    # Инициализация суммы
    total = 0.0
    
    # Инициализация факториала (2! = 2 для k=1)
    fact = 2  # (1+1)! = 2! = 2
    
    # Вычисление суммы для k=1..n
    for k in range(1, n + 1):
        # Вычисление текущего члена суммы
        term = (a * b) / fact
        total += term
        
        # Если это не последняя итерация, вычисляем a и b для следующего k
        if k < n:
            # Вычисление новых значений по формулам
            a_new = 2 * b + a
            b_new = 2 * (a ** 2) + b
            
            # Обновляем значения для следующей итерации
            a, b = a_new, b_new
            
            # Обновляем факториал: (k+2)! = (k+1)! * (k+2)
            fact *= (k + 2)
    
    # Вывод результата
    print(f"Сумма от k=1 до {n} (a_k * b_k / (k+1)!) = {total}")


if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
