"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
4. Простейшие циклы

103. Пусть
y0 = 1; yk = (yk-1 + 1) / (yk-1 + 2), k = 1,2,...
Дано действительное ε >0. Найти первый член yn, для которого выполнено yn - yn-1 < ε.
"""


def main():
    # Ввод действительного положительного числа ε
    eps = float(input("Введите положительное число ε: "))
    
    if eps <= 0:
        print("ε должно быть положительным числом")
        return
    
    # Инициализация начального значения
    y_prev = 1.0  # y0
    n = 0  # счетчик итераций
    
    # Максимальное количество итераций для предотвращения бесконечного цикла
    max_iterations = 1000
    
    print("Вычисление последовательности:")
    print(f"y_{n} = {y_prev}")
    
    # Вычисление последовательности
    while n < max_iterations:
        # Вычисление следующего члена последовательности
        y_current = (y_prev + 1) / (y_prev + 2)
        n += 1  # увеличиваем счетчик
        
        print(f"y_{n} = {y_current}")
        
        # Проверка условия: |y_current - y_prev| < eps
        # (в условии указано y_n - y_{n-1} < ε, но для убывающей последовательности 
        # это всегда верно, поэтому используем модуль разности)
        if abs(y_current - y_prev) < eps:
            print(f"\nНайден член y_{n} = {y_current}")
            print(f"Условие |y_{n} - y_{n-1}| < {eps} выполнено")
            print(f"Фактическая разность: |{y_current} - {y_prev}| = {abs(y_current - y_prev)}")
            break
        
        # Подготовка к следующей итерации
        y_prev = y_current
    else:
        print(f"\nЗа {max_iterations} итераций условие не достигнуто")
        print(f"Последнее вычисленное значение: y_{n} = {y_current}")
        print(f"Текущая разность: {abs(y_current - y_prev)}")


if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
