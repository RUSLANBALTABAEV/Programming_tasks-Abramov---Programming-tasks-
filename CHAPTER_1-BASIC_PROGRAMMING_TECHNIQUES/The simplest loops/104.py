"""
ГЛАВА 1
ОСНОВНЫЕ ПРИЁМЫ ПРОГРАММИРОВАНИЯ
4. Простейшие циклы


104. Дано действительное a > 0. Последовательность x0, x1,... образована по закону

x0 = min(2 * a, 0.95) при a <= 1,
x0 = a / 5            при 1 < a <= 25,
x0 = a / 25           в остальных случаях,

xn = a / 5 * xn-1 + 4 / 5 * x ^ 2n-1), n = 1,2,...

Найти первый член xn, для которого 5 / 4 * a * abs(xn+1 - xn) < 10 ^ -6. Вычислить
для найденного значения xn разность a - x ^ 5n.
"""


def main():
    # Ввод действительного числа a > 0
    a = float(input("Введите действительное число a > 0: "))
    
    if a <= 0:
        print("a должно быть положительным числом")
        return
    
    # Определение начального значения x0
    if a <= 1:
        x0 = min(2 * a, 0.95)
    elif a <= 25:
        x0 = a / 5
    else:
        x0 = a / 25
    
    # Инициализация переменных
    x_prev = x0  # x_n
    n = 0  # счетчик итераций
    
    # Параметры
    epsilon = 1e-6
    max_iterations = 10000
    
    print(f"Начальное значение x0 = {x0}")
    
    # Вычисление последовательности
    while n < max_iterations:
        # Вычисление x_{n+1}
        x_next = (a / 5) * x_prev + (4 / (5 * x_prev**4))
        
        # Проверка условия
        if (5 / 4) * a * abs(x_next - x_prev) < epsilon:
            print(f"\nНайден член x_{n} = {x_prev}")
            print(f"Условие (5/4)*a*|x_{n+1} - x_{n}| < {epsilon} выполнено")
            print(f"Вычисляем разность a - x_{n}^5:")
            
            # Вычисление разности a - x_n^5
            difference = a - x_prev**5
            print(f"a - x_{n}^5 = {a} - {x_prev**5} = {difference}")
            break
        
        # Подготовка к следующей итерации
        x_prev = x_next
        n += 1
        
        # Вывод прогресса каждые 1000 итераций
        if n % 1000 == 0:
            print(f"Итерация {n}: x_{n} = {x_prev}")
    else:
        print(f"\nЗа {max_iterations} итераций условие не достигнуто")
        print(f"Последнее вычисленное значение: x_{n} = {x_prev}")


if __name__ == "__main__":
    main()
    input("\nНажмите Enter, чтобы завершить программу.")
